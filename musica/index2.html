<!DOCTYPE html>
<html>
    <head>
        <title></title>
		
		<!-- TIPICO -->
			<!-- RANGO DE TAMAÑOS OBLIGATORIOS -- 
			<meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1">
			<!-- TAMAÑO INICIAL -->
			<meta name="viewport" content="width=device-width, initial-scale=1.0"> <!---->
			
			<!-- CHARSET ESPAÑOL -->
			<meta charset="UTF-8">
			<!-- CHARSET RUSO -->
			<meta charset="windows-1251">
			
		
		
		<!-- METADATAS FORMALES -->
			<meta name="author" content="Gio">
			<meta name="description" content="">
			
		
		
		<!-- RECURSOS --
			<base href="#carpeta#" >
			<link href="#.css" rel="stylesheet" type="text/css" media="all">
			<script src="#.js"></script>
		<!-- -->


		<!-- LOGICA Y ESTILO -->
			<script>
				
			</script>
			
			<script>
			console.log("Script principal")
			//VARIABLES EDITABLES
			const carpeta="musica/";
			const lista=[
				"Calle 13 - El Aguante",
				"Calle 13 - Fuera de la Atmosfera del Craneo",
				"Calle 13 - La Vuelta al Mundo",
				"Calle 13 - Los Idiotas",
				"Calle 13 - Me Vieron Cruzar",
				"Calle 13 - Ojos Color Sol",
				
				"El Cuarteto de Nos - Contrapunto para Humano y Computadora",
				"El Cuarteto de Nos - Lo Malo de ser Bueno",
				
				"Gnash - Lights Down Low",
				"Gnash - Nobody's Home",
				
				"Slipknot - Psychosocial",
				
				"Sol Pereyra - Nadie Te Pregunto",
				
				"Twenty One Pilots - Stressed Out",
				"Twenty One Pilots - Stressed Out Metal"
			];
			const formato=".mp3";
			const n = lista.length;
			
			
			
			
			//AJUSTE
			const objetoHTML="articuloMusica";
			var res="";
			
			var cancion=0, volumen=0.8, tiempo=0, mute=0;
			
			if(localStorage.getItem('cancion')==null){
				localStorage.setItem('musica_cancion', cancion);
				localStorage.setItem('musica_volumen', volumen);
				localStorage.setItem('musica_tiempo', tiempo);
				localStorage.setItem('musica_mute', mute);
			} else {
				cancion=parseInt(localStorage.getItem('musica_cancion'));
				volumen=parseInt(localStorage.getItem('musica_volumen'));
				tiempo=parseInt(localStorage.getItem('musica_tiempo'));
				mute=parseInt(localStorage.getItem('musica_mute'));
			}
			
			
			
			
			
			
			
			//FUNCIONES
			/*
				audio.duration: Deuelve la duracion del audio
				audio.currentTime: Posiciona el audio en donde se espesifique
			*/
				var repro=false;
				var PLAY = "PLAY";
				var PAUSE = "PAUSE";
				var OPUESTO = "OPUESTO";
				function PlayPause(inp = OPUESTO){
					if(inp == PLAY){
						repro=true;
						document.getElementById('audio').play();
					} else if(inp == PAUSE){
						repro=false;
						document.getElementById('audio').pause();
					} else if(inp == OPUESTO){
						repro=!repro;
						if(repro){
							document.getElementById('audio').play();
							document.getElementById('play').innerHTML="Pause";
						} else {
							document.getElementById('audio').pause();
							document.getElementById('play').innerHTML="Play";
						}
					} else {
						console.log("Error al usar la funcion PlayPause(). Parametro ingresano no existente.");
					}
				}
				
				function Siguiente(inp = 1){
					repro=document.getElementById("audio").played;
					cancion+=inp;
					if(cancion == n){
						cancion = 0;
					} else if(cancion == -1){
						cancion = n-1;
					}
					document.getElementById('audio').src=carpeta+lista[cancion]+formato;
					while(repro && !document.getElementById("audio").played){
						document.getElementById('audio').play();
					}
					document.getElementById("titulo").innerHTML=lista[cancion];
					document.title=lista[cancion];
					localStorage.setItem('musica_cancion', cancion);
					if(repro){
						document.getElementById('audio').play();
					} else {
						document.getElementById('audio').pause();
					}
				}
				
				
				function Volumen(inp){
					if(inp == "MUTE" || inp == 0){
						if(mute){
							mute=0;
							document.getElementById('mute').innerHTML="Mute";
						} else {
							mute=1;
							document.getElementById('mute').innerHTML="Desmute";
						}
						document.getElementById('audio').muted=mute;
						localStorage.setItem("musica_mute", mute);
					} else if(inp > -1 && inp < 1){
						volumen+=inp;
						if(volumen<0){
							volumen=0;
						} else if(volumen > 1){
							volumen=1;
						}
						if(document.getElementById('audio').volume<1 && document.getElementById('audio').volume>0){
							document.getElementById('audio').volume+=0.1
						}
					}
				}
			console.log("Script principal")
		</script>
		
		
			
			<style>
				
			</style>
    </head>

    <body>
		<!-- CABECERA -->
        <header>
			
		</header>
		
		<!-- MENU DE NAVEGACION -->
        <nav>
			
		</nav>
		
		<!-- CUERPO -->
		<main>
			<section>
				<h2 id="titulo"></h2>
			<section>
			
			<section>
				<audio src="#" preload controls id="audio">
					<p class="errorAudio">'ERROR...'</p>
				</audio>
			</section>
			
			<section>
				<article id="articuloMusica">
					<!--<audio src="audio.ogg" controls preload="auto">
						<p class="errorAudio"></p>
					</audio><!---->
				</article>
				<div>
					<button onclick="PlayPause('OPUESTO')" id="play">Play</button><br>
					<button onclick="Volumen(0.1)">Aumentar el Volumen</button>
					<button onclick="Volumen(-0.1)">Disminuir el Volumen</button>
					<button onclick="Volumen('MUTE')" id="mute">Mute</button><br>
					<button onclick="Siguiente(-1)">Anterior</button>
					<button onclick="Siguiente(1)">Siguiente</button>
				</div> 
			</section>
			
			<aside>
				
			</aside>
		</main>
		
		<!-- PIE DE PAGINA -->
		<footer>
			
		</footer>
		
		<!-- ESPACIO PARA INCLUIR SCRIPTS -->
		<div id="parasito">
			
		</div>
		
		<script>
			console.log("Script final")
			
			//BUCLE
			var e=0;
			function loop(){
				if(document.getElementById("audio").ended && document.getElementById("audio").played){
					Siguiente(1);
				}
				//INSISTIR
				
				e++;
			}
			
			document.getElementById("titulo").innerHTML=lista[cancion];
			document.title=lista[cancion];
			
			document.getElementById('audio').src=carpeta+lista[cancion]+formato;
			
			document.getElementById('audio').volume=volumen;
			
			document.getElementById('audio').currentTime=tiempo;
			
			document.getElementById('audio').muted=mute*-1;
			
			setInterval(function() { loop() }, 500);
			
			console.log("Script final")
		</script>
    </body>
</html>
